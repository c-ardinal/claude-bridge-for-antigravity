name: Auto-Translate README

on:
    push:
        paths:
            - "README.md"
    workflow_dispatch:

jobs:
    translate:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3

            - name: Set up Python
              uses: actions/setup-python@v4
              with:
                  python-version: "3.x"

            - name: Translate README via LLM
              env:
                  ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
              run: |
                  # Normally, you would run a script that calls the API.
                  # For example, using a simple python script or a dedicated action:
                  python scripts/claude-bridge.py translate-readme

                  # In a real environment, you'd use something like:
                  # npx claude-code translate README.md README_en.md

            - name: Commit and Push Changes
              uses: stefanzweifel/git-auto-commit-action@v4
              with:
                  commit_message: "docs: automatic translation of README to English [skip ci]"
                  file_pattern: "README_en.md"
